<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script>
window.onload=function(){
	var oBox=document.getElementsByTagName("input");
	var length=oBox.length;
	for(var i=0;i<length;i++){
		oBox[i].onclick=function(){
			if(this.checked){
				window.localStorage.setItem("sel",this.value);
			}else{
				window.localStorage.setItem("onSel",this.value);
			}
		}
	}
	
	window.addEventListener("storage",function(ev){//当前页面的事件不会触发
		if(ev.key=="sel"){
			for(var i=0;i<length;i++){
				if(ev.newValue==oBox[i].value){
					oBox[i].checked=true;
				}
			}
		}else if(ev.key=="onSel"){
			for(var i=0;i<length;i++){
				if(ev.newValue==oBox[i].value){
					oBox[i].checked=false;
				}
			}
		}
	},false);
}
</script>
</head>
<body>
<input type="checkbox" value="香蕉" />香蕉<br />
<input type="checkbox" value="苹果" />苹果<br />
<input type="checkbox" value="西瓜" />西瓜<br />
<input type="checkbox" value="哈密瓜" />哈密瓜<br />
</body>
</html>